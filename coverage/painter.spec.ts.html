<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for painter.spec.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="prettify.css" />
    <link rel="stylesheet" href="base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="index.html">All files</a> painter.spec.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">96.72% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>59/61</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">50% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>2/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>9/9</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>54/54</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-yes">25x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import {Painter} from './painter'
import * as tap from 'tape'
import {join} from 'path';
import {Document, FontEncoding} from './document';
import {CONVERSION} from "./index";
import {Rect} from "./rect";
import {Cell, Table} from "./table";
&nbsp;
tap('Painter Api', sub =&gt; {
    const filePath = join(__dirname, '../test-documents/test.pdf'),
        outFile = '/tmp/painter.out.pdf',
        doc = new Document(filePath)
&nbsp;
    doc.on('ready', pdf =&gt; {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (pdf instanceof Error) <span class="cstat-no" title="statement not covered" >throw Error("doc ready error")</span>
        const page = pdf.getPage(0),
            painter = new Painter(doc, page),
            font = pdf.createFont({fontName: 'monospace', encoding: FontEncoding.Identity})
&nbsp;
        // TODO: Add correct assertions, will require parsing final doc for contents / resources objects
        sub.test('paint', t =&gt; {
&nbsp;
            font.size = 16
            painter.font = font
            const metric = font.getMetrics()
            let x: number, y: number
            x = CONVERSION * 10000
            y = page.height - 10000 * CONVERSION
            y -= metric.lineSpacing
            t.doesNotThrow(() =&gt; painter.drawText({x, y}, 'Test'))
            x = 0
            let l: number, h: number, w: number, i: number
            let msg = "Grayscale - Colospace"
            h = metric.lineSpacing
            w = font.stringWidth(msg)
            y = page.height - 10000 * CONVERSION
&nbsp;
            t.doesNotThrow(() =&gt; painter.drawText({x: 12000 * CONVERSION, y: y - h}, msg))
            let rect = new Rect([12000 * CONVERSION, y - h, w, h])
            painter.rectangle(rect)
            t.doesNotThrow(() =&gt; painter.stroke())
&nbsp;
            let lineLength = 50000 * CONVERSION
&nbsp;
            for (let s = 0; s &lt; 5; s++) {
                x += 10000 * CONVERSION
                painter.setStrokeWidth((s * 1000) * CONVERSION)
                painter.setStrokingGrey(s / 10.0)
                t.doesNotThrow(() =&gt; painter.drawLine({x, y}, {x, y: y - lineLength}))
            }
&nbsp;
            const table = new Table(doc, 5, 5)
            painter.setColor([0.0, 0.0, 0.0])
            table.font = font
            table.foregroundColor = [0.0, 0.0, 0.0]
            for (let c = 0; c &lt; 5; c++) {
                for (let r = 0; r &lt; 5; r++) {
                    const cell = new Cell(table, c, r)
                    cell.text = 'A'
                }
            }
            table.tableWidth = 200
            table.tableHeight = 200
            t.doesNotThrow(() =&gt; table.draw({x: 300, y: 300}, painter))
&nbsp;
            painter.finishPage()
            pdf.write((e: Error, d: any) =&gt; {
                <span class="missing-if-branch" title="if path not taken" >I</span>if (e instanceof Error) <span class="cstat-no" title="statement not covered" >t.fail()</span>
                t.end()
            }, outFile)
        })
&nbsp;
    })
&nbsp;
})
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed Feb 28 2018 16:13:55 GMT-0800 (PST)
</div>
</div>
<script src="prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="sorter.js"></script>
</body>
</html>
